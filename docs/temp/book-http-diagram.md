# 《HTTP图解》

## Web及网络基础

### TCP/IP的分层管理
1. 应用层 - HTTP、FTP、DNS等
    * HTTP。
    * DNS协议。通过域名查找IP地址，或逆向从IP地址反查域名的服务。
2. 传输层。提供两台计算机之间的数据传输。
    * TCP协议。把HTTP请求报文进行**分割**（为了更容易传送大数据），并在报文上打上标记序号及端口号，发送给网络层。提供三次握手（TCP过程标志：SYN和ACK），确认数据最终送达到对方。
1. 网络层。处理网络上流动的数据包，规定了通过怎样的路径到达对方计算机，并把数据包传送给对方。
    * IP协议。增加作为通信目的地的MAC地址后，转发给链路层。
    * 使用ARP协议，反查出对应的MAC地址。（IP地址可变换，MAC地址基本不会变）
1. 链路层。处理连接网络等硬件部分，包括控制操作系统、硬件的设备驱动、网卡等物理可见部分。

各种协议与HTTP协议的关系：
![image](https://user-images.githubusercontent.com/6310131/60406595-3d524d80-9be9-11e9-904a-22495ac30f25.png)

TCP协议三次握手：
![image](https://user-images.githubusercontent.com/6310131/60406519-d3d23f00-9be8-11e9-8390-38c80bb260c6.png)

## Http协议

![image](https://user-images.githubusercontent.com/6310131/61171226-30e5d180-a5a7-11e9-84b4-b874617105a0.png)

### 响应状态
* 2xx 成功
    * 200 ok
    * 204 没有内容
    * 206 部分内容
* 3xx 重定向
    * 304 没有更新
* 4xx 客户端错误
    * 403 禁止
    * 404 没有找到
* 5xx 服务器错误
    * 500 服务器错误
    * 503 服务不可用，表明服务器正在停机维护

### Cookie

Cookie会根据从服务器发送的响应报文内一个叫`Set-Cookie`的首部字段信息，通知客户端保存Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入Cookie的值发送出去。

## Web安全
1. 输出值转义不完全引发的安全漏洞
    1. 跨站脚本攻击
        * 动态生成HTML
    1. sql注入攻击
    1. os命令攻击