(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{387:function(t,s,a){"use strict";a.r(s);var n=a(9),o=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"《你不知道的javascript》"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#《你不知道的javascript》","aria-hidden":"true"}},[t._v("#")]),t._v(" 《你不知道的JavaScript》")]),t._v(" "),a("h2",{attrs:{id:"编译原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译原理","aria-hidden":"true"}},[t._v("#")]),t._v(" 编译原理")]),t._v(" "),a("ul",[a("li",[t._v("概念\n"),a("ul",[a("li",[t._v("引擎 从头到尾的编译与执行")]),t._v(" "),a("li",[t._v("编译器 语法分析以及代码生成")]),t._v(" "),a("li",[t._v("作用域 一套规则，确定标志符的访问权限")])])]),t._v(" "),a("li",[t._v("过程\n"),a("ul",[a("li",[t._v("分词/词法分析（涉及到引擎、作用域概念）")]),t._v(" "),a("li",[t._v("解析/语法分析")]),t._v(" "),a("li",[t._v("代码生成")])])]),t._v(" "),a("li",[t._v("举例：变量赋值 var a = 2\n"),a("ol",[a("li",[t._v("编译阶段："),a("code",[t._v("编译器")]),t._v("在"),a("code",[t._v("当前作用域")]),t._v("声明变量a（之前会检查有没有该变量）")]),t._v(" "),a("li",[t._v("执行阶段："),a("code",[t._v("运行时引擎")]),t._v("在作用域查找该变量，找到赋值")])])])]),t._v(" "),a("h2",{attrs:{id:"块作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#块作用域","aria-hidden":"true"}},[t._v("#")]),t._v(" 块作用域")]),t._v(" "),a("p",[t._v("函数作用域是最常见的作用域单元。作用域下保存对应的变量或者函数，同时"),a("code",[t._v("作用域是嵌套的")]),t._v("，当在查找当前作用域下的变量时，找不到会递归去上层的作用域查找，直到找到为止；当找不到时则直接报错。")]),t._v(" "),a("ul",[a("li",[t._v("闭包的应用")]),t._v(" "),a("li",[t._v("垃圾回收机制基础")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" globalScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" innerScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("123")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("innerScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 123")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// let关键字隐式的将变量innerScope绑定到{..}作用域中")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" globalScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" innerScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("123")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("innerScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// innerScope is not defined")]),t._v("\n")])])]),a("h2",{attrs:{id:"this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this","aria-hidden":"true"}},[t._v("#")]),t._v(" this")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("this在运行时绑定")]),t._v("，并不是在编写时绑定。")]),t._v(" "),a("li",[t._v("当一个函数（函数也是对象）被调用时，会创建一个"),a("code",[t._v("执行上下文")]),t._v("，this是执行上下文的一个属性。执行上下文包含：\n"),a("ul",[a("li",[t._v("哪里被调用（调用栈）")]),t._v(" "),a("li",[t._v("函数的调用方法")]),t._v(" "),a("li",[t._v("传入的参数等")])])])]),t._v(" "),a("h3",{attrs:{id:"this绑定规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this绑定规则","aria-hidden":"true"}},[t._v("#")]),t._v(" this绑定规则")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("默认绑定")]),t._v(" 严格模式绑定到undefined，否则绑定到全局对象")]),t._v(" "),a("li",[a("code",[t._v("隐式绑定")]),t._v(" 绑定到上下文对象")]),t._v(" "),a("li",[a("code",[t._v("显示绑定")]),t._v(" call/apply/bind绑定到指定对象")]),t._v(" "),a("li",[a("code",[t._v("new绑定")]),t._v(" 绑定到新创建的对象")])]),t._v(" "),a("p",[t._v("ES6的箭头函数并不会使用以上四种绑定规则，而是根据当前的词法作用域来决定this（等同于ES5 self = this机制）")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 隐式绑定")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    a"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    foo"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" foo\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nobj"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 隐式丢失")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bar "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo "),a("span",{attrs:{class:"token comment"}},[t._v("// bar 引用的是foo函数本身，而不是对象obj")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("bar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// undefined")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 最常见的隐式丢失")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/** function setTimout(fn, delay) { // 等同于 fn = obj.foo\n    // 等待delay\n    fn()\n}**/")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("100")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// undefined")]),t._v("\n\n")])])])])},[],!1,null,null,null);o.options.__file="book-you-dont-know-javascript.md";s.default=o.exports}}]);